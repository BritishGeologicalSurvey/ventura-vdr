<div class="flex mb-4 legend">
  <p class="!mr-4">
    <span class="font-aspekta-semibold">WF</span> = Water flow {{ waterQualityUnits }}
  </p>
  <p class="!mr-4">
    <span class="font-aspekta-semibold">EW</span> = Excess water {{ excessWaterUnits }}
  </p>
  <p class="!mr-4">
    <span class="font-aspekta-semibold">WQ(N)</span> = Water quality (Nitrate) {{ waterQualityUnits }}
  </p>
  <p class="!mr-4">
    <span class="font-aspekta-semibold">WQ(NH)</span> = Water quality (Ammonia) {{ waterQualityUnits }}
  </p>
  <p class="!mr-4">
    <span class="font-aspekta-semibold">WQ(P)</span> = Water quality (Phosphorus) {{ waterQualityUnits }}
  </p>
</div>
<ng-container *ngIf="activeScenario && activeScenario.scenarioId === 'business-as-usual'">
  <ng-container *ngIf="dataSource.filteredData.length > 0">
    <table mat-table [dataSource]="dataSource" [fixedLayout]="false">
      <ng-container matColumnDef="catchment">
        <th mat-header-cell *matHeaderCellDef>
          Subcatchment
        </th>
        <td mat-cell *matCellDef="let element" [class]="component.getTableBgColour(element.id)">
          {{ Subcatchments[element.catchment] }}
        </td>
      </ng-container>

      <ng-container matColumnDef="today">
        <th mat-header-cell *matHeaderCellDef>
          <p class="text-sm">Baseline</p>
          <div class="flex justify-between">
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WF</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">EW</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(N)</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(NH)</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(P)</p>
            </div>
          </div>
        </th>
        <td mat-cell *matCellDef="let element">
          <span class="flex justify-between w-full">
            <span class="grow basis-0">
              {{ element?.today.ManRiverFlowsMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element?.today.ManExcessWaterMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element?.today.ManRiverNitrateMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element?.today.ManRiverAmmoniaMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element?.today.ManRiverPMean | sigFig: 4 }}
            </span>
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="nearFuture">
        <th mat-header-cell *matHeaderCellDef>
          <p class="text-sm">Modest change</p>
          <div class="flex justify-between">
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WF</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">EW</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(N)</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(NH)</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(P)</p>
            </div>
          </div>
        </th>
        <td mat-cell *matCellDef="let element">
          <span class="flex justify-between w-full">
            <span class="grow basis-0">
              {{ element.nearFuture.ManRiverFlowsMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.nearFuture.ManExcessWaterMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.nearFuture.ManRiverNitrateMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.nearFuture.ManRiverAmmoniaMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.nearFuture.ManRiverPMean | sigFig: 4 }}
            </span>
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="farFuture">
        <th mat-header-cell *matHeaderCellDef>
          <p class="text-sm">Major change</p>
          <div class="flex justify-between">
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WF</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">EW</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(N)</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(NH)</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(P)</p>
            </div>
          </div>
        </th>
        <td mat-cell *matCellDef="let element">
          <span class="flex justify-between w-full">
            <span class="grow basis-0">
              {{ element.farFuture.ManRiverFlowsMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.farFuture.ManExcessWaterMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.farFuture.ManRiverNitrateMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.farFuture.ManRiverAmmoniaMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.farFuture.ManRiverPMean | sigFig: 4 }}
            </span>
          </span>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </ng-container>
  <ng-container *ngIf="dataSource.filteredData.length === 0">
    <p class="text-lg text-bgs-mono-grey-4 text-center !mt-8">
      No data available.
    </p>
  </ng-container>
</ng-container>

<ng-container *ngIf="activeScenario.scenarioId !== 'business-as-usual'">
  <ng-container *ngIf="scenarioDataSource.data.length > 0">
    <table mat-table [dataSource]="scenarioDataSource" [fixedLayout]="false">
      <ng-container matColumnDef="catchment">
        <th mat-header-cell *matHeaderCellDef>
          Catchment
        </th>
        <td mat-cell *matCellDef="let element" [class]="component.getTableBgColour(element.id)">
          {{ Subcatchments[element.catchment] }}
        </td>
      </ng-container>

      <ng-container matColumnDef="today">
        <th mat-header-cell *matHeaderCellDef>
          <p class="text-sm">Baseline</p>
          <div class="flex justify-between">
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WF</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">EW</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(N)</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(NH)</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(P)</p>
            </div>
          </div>
        </th>
        <td mat-cell *matCellDef="let element">
          <span class="flex justify-between w-full">
            <span class="grow basis-0">
              {{ element?.today.ManRiverFlowsMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element?.today.ManExcessWaterMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element?.today.ManRiverNitrateMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element?.today.ManRiverAmmoniaMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element?.today.ManRiverPMean | sigFig: 4 }}
            </span>
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="nearFuture">
        <th mat-header-cell *matHeaderCellDef>
          <p class="text-sm">Modest change</p>
          <div class="flex justify-between">
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WF</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">EW</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(N)</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(NH)</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(P)</p>
            </div>
          </div>
        </th>
        <td mat-cell *matCellDef="let element">
          <span class="flex justify-between w-full">
            <span class="grow basis-0">
              {{ element.nearFuture.ManRiverFlowsMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.nearFuture.ManExcessWaterMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.nearFuture.ManRiverNitrateMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.nearFuture.ManRiverAmmoniaMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.nearFuture.ManRiverPMean | sigFig: 4 }}
            </span>
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="farFuture">
        <th mat-header-cell *matHeaderCellDef>
          <p class="text-sm">Major change</p>
          <div class="flex justify-between">
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WF</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">EW</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(N)</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(NH)</p>
            </div>
            <div class="w-1/5 text-left">
              <p class="text-xs !mb-1">WQ(P)</p>
            </div>
          </div>
        </th>
        <td mat-cell *matCellDef="let element">
          <span class="flex justify-between w-full">
            <span class="grow basis-0">
              {{ element.farFuture.ManRiverFlowsMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.farFuture.ManExcessWaterMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.farFuture.ManRiverNitrateMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.farFuture.ManRiverAmmoniaMean | sigFig: 4 }}
            </span>
            <span class="grow basis-0">
              {{ element.farFuture.ManRiverPMean | sigFig: 4 }}
            </span>
          </span>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </ng-container>
  <ng-container *ngIf="scenarioDataSource.data.length === 0">
    <p class="!mt-8 text-lg text-center text-bgs-mono-grey-4">
      No scenario data has been generated yet.
    </p>
  </ng-container>
</ng-container>
